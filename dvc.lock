schema: '2.0'
stages:
  preprocess:
    cmd: PYTHONPATH=. python -m src.data_preprocessing.preprocess_spark --params
      conf/preprocess.yaml
    deps:
    - path: conf/preprocess.yaml
      hash: md5
      md5: 080197644b1f98e672a0e212484dd1ff
      size: 161
    - path: data/raw
      hash: md5
      md5: 771bc81b4bb3f96ab410bc6b04e42586.dir
      size: 61194
      nfiles: 1
    - path: src/data_preprocessing/preprocess_spark.py
      hash: md5
      md5: 09c1c31e8b863d4a3cf229be83a9adc8
      size: 1778
      isexec: true
    outs:
    - path: data/processed
      hash: md5
      md5: 686e65d4711ee123109c048a67008554.dir
      size: 7285
      nfiles: 4
  train:
    cmd: PYTHONPATH=. MLFLOW_TRACKING_URI=http://127.0.0.1:5001 python -m 
      src.training.train_spark_mllib --params conf/train.yaml
    deps:
    - path: conf/train.yaml
      hash: md5
      md5: 78acfb1a9d2c03178bb6db3ec4dbf394
      size: 539
    - path: data/processed
      hash: md5
      md5: 686e65d4711ee123109c048a67008554.dir
      size: 7285
      nfiles: 4
    - path: src/training/train_spark_mllib.py
      hash: md5
      md5: 1952fa24b9e1f3c5d1022651cc8765c9
      size: 6296
    outs:
    - path: reports/training
      hash: md5
      md5: 6cd49f0a57d90f8a17a537955d16861f.dir
      size: 402
      nfiles: 4
  register_model:
    cmd: MLFLOW_TRACKING_URI=http://127.0.0.1:5001 PYTHONPATH=. python -m 
      src.registry.promote_to_production
    deps:
    - path: reports/training/run_id.txt
      hash: md5
      md5: add9506c3e49e792b56133a0da82f511
      size: 32
    - path: src/registry/promote_to_production.py
      hash: md5
      md5: 1b5fc52f748c8ae08856cf324ccffb2b
      size: 894
    outs:
    - path: reports/registry
      hash: md5
      md5: d00074c319925a41ddce1be2a1eabb49.dir
      size: 73
      nfiles: 1
